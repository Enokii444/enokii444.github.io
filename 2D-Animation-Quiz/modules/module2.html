<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2: Physics & Motion | 2D Animation Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz-styles.css">
</head>
</head>
<body>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">üé¨ Animation Reviewer</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../index.html">‚Üê Back to Modules</a>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">‚ö° Physics & Motion</h1>
            <p class="hero-subtitle">Module 2: Understanding Forces and Movement in Animation</p>
        </div>
    </section>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2>Module 2: Physics & Motion Quiz</h2>
                <p class="text-muted">Master timing, spacing, momentum, and Newton's laws in animation</p>
                
                <div class="quiz-options">
                    <label><input type="checkbox" id="randomize" onchange="toggleRandomize()"> Randomize Questions</label>
                </div>
            </div>

            <div id="quiz-content">
                <div class="progress-container">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div class="question-card">
                    <div class="question-number" id="question-number">Question 1 of 5</div>
                    <div class="question-text" id="question">Loading question...</div>
                    <div id="options"></div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                    <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                        Next Question ‚Üí
                    </button>
                </div>
            </div>

            <div id="quiz-complete" class="quiz-complete" style="display: none;">
                <h2>üéâ Module 2 Complete!</h2>
                <div class="score-display" id="final-score"></div>
                <div class="score-message" id="score-message"></div>
                <div class="stats-grid">
                    <div class="stat-card"><span class="stat-number" id="correct-answers">0</span><div class="stat-label">Correct Answers</div></div>
                    <div class="stat-card"><span class="stat-number" id="accuracy">0%</span><div class="stat-label">Accuracy</div></div>
                    <div class="stat-card"><span class="stat-number" id="total-questions">31</span><div class="stat-label">Total Questions</div></div>
                </div>
                <div class="btn-group">
                    <button class="next-btn" onclick="restartQuiz()">Retake Module 2</button>
                    <a href="../modules/module3.html" class="btn-secondary">Next: Module 3</a>
                    <a href="../index.html" class="btn-secondary">All Modules</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const originalQuiz = [
            {q:"Acceleration happened when spacing change.", options:["True","False"], answer:0},
            {q:"It is the main culprit to change the character's momentum.", options:["Inertia","Kinetics","Unbalanced force","Balanced force"], answer:2},
            {q:"The bigger the force, the quicker the momentum changes.", options:["True","False"], answer:0},
            {q:"Newton's 1st law of motion is the law of speed.", options:["True","False"], answer:1},
            {q:"Odd rule is for straight ahead animation.", options:["True","False"], answer:0}
        ];

        let module2Quiz = [...originalQuiz];
        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let isRandomized = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function toggleRandomize() {
            isRandomized = document.getElementById('randomize').checked;
            module2Quiz = isRandomized ? shuffleArray(originalQuiz) : [...originalQuiz];
            currentQuestion = 0;
            score = 0;
            answered = false;
            loadQuestion();
        }

        function updateNavigation() {
            const progress = ((currentQuestion + 1) / module2Quiz.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        function loadQuestion() {
            if (currentQuestion >= module2Quiz.length) {
                showResults();
                return;
            }
            
            const question = module2Quiz[currentQuestion];
            document.getElementById('question-number').textContent = `Question ${currentQuestion + 1} of ${module2Quiz.length}`;
            document.getElementById('question').textContent = question.q;
            
            const optionsHtml = question.options.map((option, index) => 
                `<div class="option-btn" onclick="selectOption(${index})">${option}</div>`
            ).join('');
            
            document.getElementById('options').innerHTML = optionsHtml;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            answered = false;
            updateNavigation();
        }

        function selectOption(selectedIndex) {
            if (answered) return;
            
            const question = module2Quiz[currentQuestion];
            const options = document.querySelectorAll('.option-btn');
            
            options.forEach((option, index) => {
                if (index === selectedIndex) {
                    option.classList.add('selected');
                    if (index === question.answer) {
                        option.classList.add('correct');
                        score++;
                    } else {
                        option.classList.add('incorrect');
                    }
                } else if (index === question.answer) {
                    option.classList.add('correct');
                }
            });
            
            answered = true;
            document.getElementById('next-btn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestion++;
            answered = false;
            document.getElementById('next-btn').style.display = 'none';
            loadQuestion();
        }

        function showResults() {
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-complete').style.display = 'block';
            document.getElementById('final-score').textContent = `${score} / ${module2Quiz.length}`;
            document.getElementById('correct-answers').textContent = score;
            document.getElementById('accuracy').textContent = Math.round((score / module2Quiz.length) * 100) + '%';
            document.getElementById('total-questions').textContent = module2Quiz.length;
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            document.getElementById('quiz-content').style.display = 'block';
            document.getElementById('quiz-complete').style.display = 'none';
            loadQuestion();
        }

        window.onload = function() {
            try {
                console.log('Loading Module 2 with simple quiz engine...');
                loadQuestion();
                console.log('Module 2 loaded successfully!');
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('quiz-content').innerHTML = '<div class="alert alert-danger">Error loading quiz. Please refresh the page.</div>';
            }
        };
    </script>
    </script>
</body>
</html>