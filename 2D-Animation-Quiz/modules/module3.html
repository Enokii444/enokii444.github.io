<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Squash & Stretch | 2D Animation Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz-styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">üé¨ Animation Reviewer</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../index.html">‚Üê Back to Modules</a>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">üéà Squash & Stretch</h1>
            <p class="hero-subtitle">Module 3: The First Principle of Animation</p>
        </div>
    </section>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2>Module 3: Squash & Stretch Quiz</h2>
                <p class="text-muted">Master deformation, weight, and flexibility in animation</p>
                
                <div class="quiz-options">
                    <label><input type="checkbox" id="randomize" onchange="toggleRandomize()"> Randomize Questions</label>
                </div>
            </div>

            <div id="quiz-content">
                <div class="progress-container">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div class="question-card">
                    <div class="question-number" id="question-number">Question 1 of 30</div>
                    <div class="question-text" id="question">Loading question...</div>
                    <div id="options"></div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                    <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                        Next Question ‚Üí
                    </button>
                </div>
            </div>

            <div id="quiz-complete" class="quiz-complete" style="display: none;">
                <h2>üéâ Module 3 Complete!</h2>
                <div class="score-display" id="final-score"></div>
                <div class="score-message" id="score-message"></div>
                <div class="stats-grid">
                    <div class="stat-card"><span class="stat-number" id="correct-answers">0</span><div class="stat-label">Correct Answers</div></div>
                    <div class="stat-card"><span class="stat-number" id="accuracy">0%</span><div class="stat-label">Accuracy</div></div>
                    <div class="stat-card"><span class="stat-number" id="total-questions">30</span><div class="stat-label">Total Questions</div></div>
                </div>
                <div class="btn-group">
                    <button class="next-btn" onclick="restartQuiz()">Retake Module 3</button>
                    <a href="../modules/module4.html" class="btn-secondary">Next: Module 4</a>
                    <a href="../index.html" class="btn-secondary">All Modules</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const originalQuiz = [
            {q:"Material of the object should be considered in the squash and stretch principle.", options:["True","False"], answer:0},
            {q:"Used to increase the sense of speed and emphasize the squash by contrast.", options:["Stretch","Timing","Straight ahead","Anticipation"], answer:0},
            {q:"The technique of anticipation helps to guide the audience's eyes to where the action is about to occur.", options:["True","False"], answer:0},
            {q:"More drawings mean faster action.", options:["True","False"], answer:1},
            {q:"In squash and stretch principle the constant is volume of the object.", options:["Weight","Speed","Volume","Velocity"], answer:2},
            {q:"What is the primary purpose of squash and stretch?", options:["To change colors","To give flexibility and life to objects","To add sound effects","To change camera angles"], answer:1},
            {q:"Which of these should remain constant in squash and stretch?", options:["Shape","Color","Volume","Position"], answer:2},
            {q:"Squash and stretch is most effective when:", options:["Applied to rigid objects","Applied to flexible objects","Used with sound","Used with bright colors"], answer:1},
            {q:"A bouncing ball demonstrates:", options:["Staging","Timing","Squash and stretch","Appeal"], answer:2},
            {q:"When should squash be applied?", options:["At the moment of impact","During slow movement","When object is static","Only in 3D animation"], answer:0},
            {q:"When should stretch be applied?", options:["When object is static","During fast movement or high acceleration","Only to backgrounds","Never"], answer:1},
            {q:"Squash and stretch helps convey:", options:["Weight and flexibility","Color and brightness","Sound and music","Camera angles"], answer:0},
            {q:"Which material would use the most squash and stretch?", options:["Steel","Rubber","Glass","Stone"], answer:1},
            {q:"Which material would use the least squash and stretch?", options:["Jelly","Rubber","Steel","Flesh"], answer:2},
            {q:"Exaggerated squash and stretch can:", options:["Break realism","Add cartoon appeal","Reduce quality","Slow down animation"], answer:1},
            {q:"Subtle squash and stretch is used for:", options:["Cartoon style","Realistic animation","Abstract art","Static images"], answer:1},
            {q:"The principle of squash and stretch was first developed by:", options:["Disney animators","Computer programmers","Live action directors","Sound engineers"], answer:0},
            {q:"Squash and stretch applies to:", options:["Only characters","Only objects","Characters and objects","Only backgrounds"], answer:2},
            {q:"When a character lands from a jump, they should:", options:["Remain the same shape","Squash","Stretch","Disappear"], answer:1},
            {q:"When a character prepares to jump, they might:", options:["Squash down","Stretch up","Stay normal","Change color"], answer:0},
            {q:"Facial expressions can use:", options:["Only squash","Only stretch","Both squash and stretch","Neither"], answer:2},
            {q:"What happens if you don't maintain volume?", options:["Animation looks more realistic","Object appears to inflate or deflate","Nothing changes","Colors become brighter"], answer:1},
            {q:"Squash and stretch is most visible in:", options:["Slow, gentle movements","Fast, dynamic movements","Static poses","Camera pans"], answer:1},
            {q:"The amount of squash and stretch depends on:", options:["Frame rate","Object's material and speed","Background color","Sound volume"], answer:1},
            {q:"In walk cycles, squash and stretch can be applied to:", options:["Only the legs","Only the torso","The entire body","Only the head"], answer:2},
            {q:"Squash and stretch in character animation helps show:", options:["Personality and emotion","Camera angles","Lighting effects","Sound effects"], answer:0},
            {q:"When should squash and stretch be avoided?", options:["In cartoon animation","In realistic animation of rigid objects","In character animation","Never"], answer:1},
            {q:"What is the relationship between speed and deformation?", options:["No relationship","Faster movement = more deformation","Faster movement = less deformation","Only color matters"], answer:1},
            {q:"Squash and stretch can be applied to:", options:["Body parts","Entire characters","Objects","All of the above"], answer:3},
            {q:"The principle helps create:", options:["Static images","Illusion of life and flexibility","Bright colors","Loud sounds"], answer:1}
        ];

        let module3Quiz = [...originalQuiz];
        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let isRandomized = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function toggleRandomize() {
            isRandomized = document.getElementById('randomize').checked;
            module3Quiz = isRandomized ? shuffleArray(originalQuiz) : [...originalQuiz];
            currentQuestion = 0;
            score = 0;
            answered = false;
            loadQuestion();
        }

        function updateNavigation() {
            const progress = ((currentQuestion + 1) / module3Quiz.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        function loadQuestion() {
            if (currentQuestion >= module3Quiz.length) {
                showResults();
                return;
            }
            
            const question = module3Quiz[currentQuestion];
            document.getElementById('question-number').textContent = `Question ${currentQuestion + 1} of ${module3Quiz.length}`;
            document.getElementById('question').textContent = question.q;
            
            const optionsHtml = question.options.map((option, index) => 
                `<div class="option-btn" onclick="selectOption(${index})">${option}</div>`
            ).join('');
            
            document.getElementById('options').innerHTML = optionsHtml;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            answered = false;
            updateNavigation();
        }

        function selectOption(selectedIndex) {
            if (answered) return;
            
            const question = module3Quiz[currentQuestion];
            const options = document.querySelectorAll('.option-btn');
            
            options.forEach((option, index) => {
                if (index === selectedIndex) {
                    option.classList.add('selected');
                    if (index === question.answer) {
                        option.classList.add('correct');
                        score++;
                    } else {
                        option.classList.add('incorrect');
                    }
                } else if (index === question.answer) {
                    option.classList.add('correct');
                }
            });
            
            answered = true;
            document.getElementById('next-btn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestion++;
            answered = false;
            document.getElementById('next-btn').style.display = 'none';
            loadQuestion();
        }

        function showResults() {
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-complete').style.display = 'block';
            document.getElementById('final-score').textContent = `${score} / ${module3Quiz.length}`;
            document.getElementById('correct-answers').textContent = score;
            document.getElementById('accuracy').textContent = Math.round((score / module3Quiz.length) * 100) + '%';
            document.getElementById('total-questions').textContent = module3Quiz.length;
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            document.getElementById('quiz-content').style.display = 'block';
            document.getElementById('quiz-complete').style.display = 'none';
            loadQuestion();
        }

        window.onload = function() {
            try {
                console.log('Loading Module 3 with simple quiz engine...');
                loadQuestion();
                console.log('Module 3 loaded successfully!');
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('quiz-content').innerHTML = '<div class="alert alert-danger">Error loading quiz. Please refresh the page.</div>';
            }
        };
    </script>
    </script>
</body>
</html>