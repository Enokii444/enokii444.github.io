<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Squash & Stretch | 2D Animation Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/quiz-styles.css">
    <style>
        .option {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .option:hover {
            background: #e9ecef;
            border-color: #6c757d;
        }
        .option.selected {
            border-color: #007bff;
            background: #e3f2fd;
        }
        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">üé¨ Animation Reviewer</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../index.html">‚Üê Back to Modules</a>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">üéà Squash & Stretch</h1>
            <p class="hero-subtitle">Module 3: The First Principle of Animation</p>
        </div>
    </section>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2>Module 3: Squash & Stretch Quiz</h2>
                <p class="text-muted">Master deformation, weight, and flexibility in animation</p>
            </div>

            <div id="quiz-content">
                <div class="progress-container">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div class="question-card">
                    <div class="question-number" id="question-number">Question 1 of 30</div>
                    <div class="question-text" id="question">Loading question...</div>
                    <div id="options"></div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                    <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">Next Question ‚Üí</button>
                </div>
            </div>

            <div id="quiz-complete" class="quiz-complete" style="display: none;">
                <h2>üéâ Module 3 Complete!</h2>
                <div class="score-display" id="final-score"></div>
                <div class="score-message" id="score-message"></div>
                <div class="stats-grid">
                    <div class="stat-card"><span class="stat-number" id="correct-answers">0</span><div class="stat-label">Correct Answers</div></div>
                    <div class="stat-card"><span class="stat-number" id="accuracy">0%</span><div class="stat-label">Accuracy</div></div>
                    <div class="stat-card"><span class="stat-number" id="total-questions">30</span><div class="stat-label">Total Questions</div></div>
                </div>
                <div class="btn-group">
                    <button class="next-btn" onclick="restartQuiz()">Retake Module 3</button>
                    <a href="../modules/module4.html" class="btn-secondary">Next: Module 4</a>
                    <a href="../index.html" class="btn-secondary">All Modules</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const module3Quiz = [
            {q:"Material of the object was made of is not to be considered on the squash and stretch principle.", options:["True","False"], answer:1},
            {q:"Used to increase the sense of speed and emphasize the squash by contrast.", options:["Stretch","Timing","Straight ahead","Anticipation"], answer:0},
            {q:"The technique of anticipation helps to guide the audience's eyes to where the action is about to occur.", options:["True","False"], answer:0},
            {q:"More drawings mean faster action.", options:["True","False"], answer:1},
            {q:"In squash and stretch principle the constant is volume of the object.", options:["Weight","Speed","Volume","Velocity"], answer:2}
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function loadQuestion() {
            if (currentQuestion >= module3Quiz.length) {
                showResults();
                return;
            }
            
            const question = module3Quiz[currentQuestion];
            document.getElementById('question-number').textContent = `Question ${currentQuestion + 1} of ${module3Quiz.length}`;
            document.getElementById('question').textContent = question.q;
            
            const optionsHtml = question.options.map((option, index) => 
                `<div class="option" onclick="selectOption(${index})">${option}</div>`
            ).join('');
            
            document.getElementById('options').innerHTML = optionsHtml;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            answered = false;
        }

        function selectOption(selectedIndex) {
            if (answered) return;
            
            const question = module3Quiz[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                if (index === selectedIndex) {
                    option.classList.add('selected');
                    if (index === question.answer) {
                        option.classList.add('correct');
                        score++;
                    } else {
                        option.classList.add('incorrect');
                    }
                } else if (index === question.answer) {
                    option.classList.add('correct');
                }
            });
            
            answered = true;
            document.getElementById('next-btn').style.display = 'block';
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function showResults() {
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-complete').style.display = 'block';
            document.getElementById('final-score').textContent = `${score} / ${module3Quiz.length}`;
            document.getElementById('correct-answers').textContent = score;
            document.getElementById('accuracy').textContent = Math.round((score / module3Quiz.length) * 100) + '%';
            document.getElementById('total-questions').textContent = module3Quiz.length;
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            document.getElementById('quiz-content').style.display = 'block';
            document.getElementById('quiz-complete').style.display = 'none';
            loadQuestion();
        }

        window.onload = function() {
            try {
                console.log('Loading Module 3 with simple quiz engine...');
                loadQuestion();
                console.log('Module 3 loaded successfully!');
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('quiz-content').innerHTML = '<div class="alert alert-danger">Error loading quiz. Please refresh the page.</div>';
            }
        };
    </script>
    </script>
</body>
</html>